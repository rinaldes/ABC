<div class="modal-dialog modal-lg">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
        &times;
      </button>
      <h4 class="modal-title" id="myModalLabel">Browse Product</h4>
    </div>
    <div class="modal-body" style="color:#5E5E5E">
      <table class="table table-striped table-brequested table-hover" width="100%">
        <thead>
          <tr>
            <th>BARCODE</th>
            <th>ARTICLE</th>
            <th>COLOUR</th>
            <th>SIZE</th>
            <th>SUPPLIER</th>
            <th>BRAND</th>
            <th>DEPARTMENT</th>
            <th></th>
          </tr>
          <tr>
            <th><%= text_field_tag :barcode, params[:barcode], class: 'form-control search', onkeyup: "reload_products()" %></th>
            <th><%= text_field_tag :article, params[:article], class: 'form-control search', onkeyup: "reload_products()" %></th>
            <th><%= text_field_tag :colour, params[:colour], class: 'form-control search', onkeyup: "reload_products()" %></th>
            <th><%= text_field_tag :size, params[:size], class: 'form-control search', onkeyup: "reload_products()" %></th>
            <th><%= text_field_tag :supplier, params[:supplier], class: 'form-control search', onkeyup: "reload_products()" %></th>
            <th><%= text_field_tag :brand, params[:brand], class: 'form-control search', onkeyup: "reload_products()" %></th>
            <th><%= text_field_tag :department, params[:department], class: 'form-control search', onkeyup: "reload_products()" %></th>
            <th></th>
          </tr>
        </thead>
        <tbody id='product-search'>
          <%= render 'product_search_list' %>
        </tbody>
      </table>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">
        Cancel
      </button>
    </div>
  </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->

<SCRIPT>
  function reload_products(){
    $(document).keypress(function(e) {
      if(e.which == 13){
        $.ajax({
          url: '/purchase_requests/search_in_modal',
          method: "get",
          data: {department: $('.modal-body #department').val(), m_class_name: $('.modal-body #m_class_name').val(), brand_name: $('.modal-body #brand_name').val(),
          article: $('.modal-body #article').val(), supplier_code: $('#supplier_code').val(), barcode: $('#barcode').val()},
          dataType: "script"
        })
      }
    });
  }
</SCRIPT>

